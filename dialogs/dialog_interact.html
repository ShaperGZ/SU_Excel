<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//ZH-CN">
<html>
<head>
    <meta charset="utf-8">
    <style>
        .text{
         font-size: 10pt
        }
    </style>
    <script>
        function def_reload(){
            window.location = "skp:def_reload@";
        }
        function get_items(){
            var result=["bd_width","bd_depth","bd_height","apt_lift_count","un_width","un_depth","un_prototype"]
            return result
        }
        function testSetVal(){
            setValue('bd_width','entered2')
        }
        function normal_mode(){
            window.location = "skp:normal_mode@";
        }
        function unit_mode(){
            window.location = "skp:unit_mode@";
        }



        function update_all(){
            items=get_items();
            message='';
            for(i =0; i<items.length;i++){
                var id = items[i];
                var val = document.getElementById(id).value;
                trunk = id+":"+val
                if (i<items.length-1){
                    trunk += ",";
                }
                message+=trunk;
            }
            window.location = "skp:update_all@"+message;
        }

        function setValue(key,value){
            ele=document.getElementById(key)
            if (ele){
                ele.value=value;
            }
        }
    </script>

</head>
<body>
    <table>
        <tbody>
        <tr>
            <td>
                <button id="b_core"  onclick="update_all()" style="width:50pt">Update</button>
                <button id="b_normal"  onclick="normal_mode()" style="width:50pt">Normal</button>
                <button id="b_units"  onclick="unit_mode()" style="width:50pt">Units</button>
                <button id="b_def_reload"  onclick="def_reload()" style="width:50pt">reload</button>
            </td>
        </tr>
        </tbody>
    </table>
    <table>
        <tbody>
            <tr>
                <td><span class ="text'">bd_area</span></td>
                <td><input id="bd_area" type="text" class="text"></td>
            </tr>
            <tr>
                <td><span class ="text'">un_proto</span></td>
                <td><select id="un_prototype" style=" width:150px">
                </select></td>
            </tr>
            <tr>
                <td><span class ="text'">bd_width</span></td>
                <td><input id="bd_width" type="text" class="text"></td>
            </tr>
            <tr>
                <td><span class ="text'">bd_depth</span></td>
                <td><input id="bd_depth" type="text" class="text"></td>
            </tr>
            <tr>
                <td><span class ="text'">bd_height</span></td>
                <td><input id="bd_height" type="text" class="text"></td>
            </tr>
            <tr>
                <td><span class ="text'">bd_ftfh</span></td>
                <td><input id="bd_ftfh" type="text" class="text"></td>
            </tr>
            <tr>
                <td><span class ="text'">bd_ftfh</span></td>
                <td><input id="bd_ftfhs" type="text" class="text"></td>
            </tr>
            <tr>
                <td><span class ="text'">un_width</span></td>
                <td><input id="un_width" type="text" class="text"></td>
            </tr>
            <tr>
                <td><span class ="text'">un_depth</span></td>
                <td><input id="un_depth" type="text" class="text"></td>
            </tr>
            <tr>
                <td><span class ="text'">apt_lift_count</span></td>
                <td><input id="apt_lift_count" type="text" class="text"></td>
            </tr>
            <tr>
                <td><span class ="text'">p_bd_width</span></td>
                <td><input id="p_bd_width" type="text" class="text"></td>
            </tr>
            <tr>
                <td><span class ="text'">p_un_width</span></td>
                <td><input id="p_un_width" type="text" class="text"></td>
            </tr>
            <tr>
                <td><span class ="text'">room_count</span></td>
                <td><input id="grade_room_count" type="text" class="text"></td>
            </tr>
            <tr>
                <td><span class ="text'">efficiency</span></td>
                <td><input id="grade_efficiency" type="text" class="text"></td>
            </tr>
            <tr>
                <td><span class ="text'">room_rect_ratio</span></td>
                <td><input id="room_rect_ratio" type="text" class="text"></td>
            </tr>


        </tbody>
    </table>

    <input id="debug" type="text" style="width:300pt"></td>

</body>
<script type="text/javascript">
    function log(str){
        document.getElementById("debug").value=str
    }

    function add_listener(iname){
        var name=iname
        var ele=document.getElementById(name)
        ele.addEventListener("keyup",
            function (event) {
                event.preventDefault();
                if (event.keyCode === 13) {
                    var value=ele.value
                    var params=name+'|'+value
                    window.location = "skp:updateAttr@"+params;
                };
            })
    }

    var items=get_items()
    for(i =0; i<items.length;i++){
        var name=items[i];
        add_listener(name);
    }



</script>
</html>